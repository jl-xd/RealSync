- 存储数据结构设计
  - 房间列表
  - 游戏局内状态
- 各种时序操作罗列
- room.{roomid}.state 还是 room.state.{roomid} 定下来
- 基于 architrechture.md 细化完整的模块、feature set、roadmap、
- API命名，是分段式好，还是普通的好 
  - https://claude.ai/chat/7326b3e7-ce49-4e71-82f8-07ed023edd06
  - https://chatgpt.com/c/685e4362-f28c-800a-9b12-412c5fab7365

## 未来扩展性规划

### 应用层分片策略 (超大规模场景)
> 注：当前Redis Cluster自动分片已足够，以下为预留扩展

#### 地理分片
- **触发条件**: 全球用户 > 100万，跨大洲延迟 > 100ms
- **实现任务**:
  - [ ] 设计地理位置检测机制 (IP地址 → 地理位置)
  - [ ] 实现区域化Redis集群部署
  - [ ] 开发跨区域数据同步策略
  - [ ] 建立区域故障转移机制

#### 业务垂直分片
- **触发条件**: 不同游戏模式负载特征差异巨大
- **实现任务**:
  - [ ] 游戏模式性能特征分析与分类
  - [ ] 专用集群资源规划 (高性能SSD vs 普通存储)
  - [ ] 按游戏类型的自动路由机制
  - [ ] 集群间负载均衡策略

#### 热点数据分离
- **触发条件**: 个别房间QPS > 10000 或连接数 > 1000
- **实现任务**:
  - [ ] 热点房间实时检测算法
  - [ ] 热点数据自动迁移机制
  - [ ] 专用高性能集群建设
  - [ ] 热点消失后的数据回迁策略

#### 分片基础设施
- **核心任务**:
  - [ ] 实现可插拔的分片策略接口
  - [ ] 开发分片管理器 (ShardedRoomManager)
  - [ ] 建设跨分片聚合查询能力
  - [ ] 分片路由元数据管理
  - [ ] 分片监控与告警系统

#### 数据迁移工具
- **工具开发**:
  - [ ] 零停机数据迁移工具
  - [ ] 分片重平衡工具
  - [ ] 数据一致性验证工具
  - [ ] 迁移进度监控面板